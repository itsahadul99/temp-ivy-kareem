<style>
  video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 1;
    transition: opacity 0.3s ease-in-out;
  }

  .video-container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .hover-left,
  .hover-right {
    position: absolute;
    top: 0;
    width: 50%;
    height: 100%;
    z-index: 10;
    cursor: pointer;
  }

  .hover-left {
    left: 0;
  }

  .hover-right {
    right: 0;
  }

  .video-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 20;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease;
  }

  .video-button:hover {
    font-style: italic;
  }

  .video-button button {
    width: 40px;
    height: 40px;
    border: 2px solid black;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .video-button:hover button {
    background-color: #6CA082;
    border-color: #6CA082;
    color: white;
  }

  .video-button p {
    margin-top: 14px;
    font-size: 28px;
    font-family: 'Minion Pro';
    transition: color 0.3s ease;
  }

  .video-button:hover p {
    color: #6CA082;
  }

  /* Mobile styles */
  .mobile-buttons {
    display: none;
  }

  @media screen and (min-width: 1024px) {
    .video-container {
      width: 1000px;
      height: 400px;
      margin: 0 auto;
    }
  }

  @media screen and (min-width: 800px) and (max-width: 1023px) {
    .video-container {
      width: 700px;
      height: 350px;
      margin: 0 auto;
    }
  }

  @media screen and (max-width: 799px) {
    .video-container {
      height: 240px;
    }

    .hover-left,
    .hover-right {
      display: none;
    }

    .desktop-buttons {
      display: none;
    }

    .mobile-buttons {
      display: flex;
      justify-content: center;
      gap: 70px;
      margin-top: 20px;
    }

    .mobile-button {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .mobile-button button {
      width: 28px;
      height: 28px;
      border: 2px solid black;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mobile-button p {
      font-size: 20px;
      font-family: 'Minion Pro';
    }
  }
</style>

<div class="kitchen-section md:min-h-[867px] py-[60px] md:py-0">
  <div class="text-center">
    <h2 class="text-[35px] md:text-[80px] font-bold font-minion-pro leading-none">
      {{ section.settings.title }}
      <span class="text-[#6CA082] italic">{{ section.settings.highlight_title }}</span>
    </h2>
  </div>

  <div class="mt-8 md:mt-16">
    <div class="relative">
      <!-- Desktop Buttons -->
      <div class="desktop-buttons">
        <div class="video-button left-[10%] xl:left-[21%] lg:left-[10%]" 
             onmouseenter="playVideo('{{ section.settings.explore_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')"
             onmouseleave="resetVideo()">
          <button>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
          <p>{{ section.settings.explore_button_text }}</p>
        </div>

        <div class="video-button right-[10%] xl:right-[21%] lg:right-[10%]" 
             onmouseenter="playVideo('{{ section.settings.shop_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')"
             onmouseleave="resetVideo()">
          <button>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
          <p>{{ section.settings.shop_button_text }}</p>
        </div>
      </div>

      <!-- Video Container -->
      <div class="video-container">
        <video id="mainVideo" muted loop playsinline autoplay>
          <source src="{{ section.settings.default_video.sources[0].url |  default: 'Right_Click.mp4' }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <div class="hover-left" 
             onmouseenter="playVideo('{{ section.settings.explore_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')"
             onmouseleave="resetVideo()"></div>
        <div class="hover-right" 
             onmouseenter="playVideo('{{ section.settings.shop_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')"
             onmouseleave="resetVideo()"></div>
      </div>

      <!-- Mobile Buttons -->
      <div class="mobile-buttons">
        <div class="mobile-button" onclick="playVideo('{{ section.settings.explore_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')">
          <button>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
          <p>{{ section.settings.explore_button_text }}</p>
        </div>

        <div class="mobile-button" onclick="playVideo('{{ section.settings.shop_video.sources[0].url | default: section.settings.default_video.sources[0].url }}')">
          <button>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
          <p>{{ section.settings.shop_button_text }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const mainVideo = document.getElementById('mainVideo');
  const defaultVideoSrc = '{{ section.settings.default_video.sources[0].url }}';

  function playVideo(videoSrc) {
    if (videoSrc && mainVideo.querySelector('source').src !== videoSrc) {
      mainVideo.querySelector('source').src = videoSrc;
      mainVideo.load();
      mainVideo.play().catch(e => console.log('Video play error:', e));
    }
  }

  function resetVideo() {
    if (mainVideo.querySelector('source').src !== defaultVideoSrc) {
      mainVideo.querySelector('source').src = defaultVideoSrc;
      mainVideo.load();
      mainVideo.play().catch(e => console.log('Video play error:', e));
    }
  }

  // Initialize video
  document.addEventListener('DOMContentLoaded', () => {
    mainVideo.play().catch(e => console.log('Autoplay prevented:', e));
  });
</script>

{% schema %}
{
  "name": "Kitchen Section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Main Title",
      "default": "Crafting"
    },
    {
      "type": "text",
      "id": "highlight_title",
      "label": "Highlighted Title",
      "default": "the Kitchen"
    },
    {
      "type": "video",
      "id": "default_video",
      "label": "Default Video",
      "info": "This video will show by default"
    },
    {
      "type": "video",
      "id": "explore_video",
      "label": "Explore Video",
      "info": "This video will play when hovering the left side"
    },
    {
      "type": "video",
      "id": "shop_video",
      "label": "Shop Video",
      "info": "This video will play when hovering the right side"
    },
    {
      "type": "text",
      "id": "explore_button_text",
      "label": "Explore Button Text",
      "default": "Explore Us"
    },
    {
      "type": "text",
      "id": "shop_button_text",
      "label": "Shop Button Text",
      "default": "Shop Now"
    }
  ],
  "presets": [
    {
      "name": "Kitchen Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}